<div class="container mt-4">

  <h3>{{ title }}</h3>

  <!-- Filter: Standard -->
  <div class="row mb-3">
    <div class="col-md-4">
      <label class="form-label">Select Standard</label>
      <select class="form-select" [(ngModel)]="selectedClass" (change)="loadStudents()">
        <option value="">-- Select Standard --</option>
        <option *ngFor="let std of standards" [value]="std.standardName">
          {{ std.standardName }}
        </option>
      </select>
    </div>

    <div class="col-md-4">
      <label class="form-label">Select Date</label>
      <input type="date" class="form-control" [(ngModel)]="selectedDate" />
    </div>
  </div>

  <!-- Attendance Buttons -->
  <div class="mb-3" *ngIf="studentsLoaded && students.length">
    <button class="btn btn-success me-2" (click)="markAllPresent()">Mark All Present</button>
    <button class="btn btn-danger me-2" (click)="markAllAbsent()">Mark All Absent</button>
    <button class="btn btn-primary" (click)="saveAttendance()">Save Attendance</button>
    <button class="btn btn-secondary ms-2" (click)="resetForm()">Reset</button>
  </div>

  <!-- Students Table -->
  <div *ngIf="studentsLoaded && students.length">
    <table class="table table-bordered table-striped">
      <thead class="table-light">
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Roll No</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let student of students; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ student.studentName }}</td>
          <td>{{ student.enrollmentNo }}</td>
          <td>
            <select class="form-select form-select-sm" [(ngModel)]="student.status">
              <option value="">-- Select --</option>
              <option value="Present">Present</option>
              <option value="Absent">Absent</option>
            </select>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="studentsLoaded && !students.length" class="alert alert-warning">
    No students found for this standard.
  </div>
</div>
