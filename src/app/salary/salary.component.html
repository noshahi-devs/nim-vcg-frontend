<div class="dashboard-main-body">
  <app-breadcrumb [title]="title"></app-breadcrumb>

  <!-- ADD SALARY -->
  <div class="card radius-12 mb-4">
    <div class="card-header">
      <h6>Add Staff Salary</h6>
    </div>

    <div class="card-body row g-3">

      <!-- STAFF DROPDOWN -->
      <div class="col-md-6">
        <label>Staff Name *</label>
        <select class="form-select"
                [(ngModel)]="salary.staffName">
          <option value="" disabled selected>Select Staff</option>
          <option *ngFor="let staff of staffList"
                  [value]="staff.staffName">
            {{ staff.staffName }}
          </option>
        </select>
      </div>

      <div class="col-md-3">
        <label>Basic Salary *</label>
        <input type="number" class="form-control"
               [(ngModel)]="salary.basicSalary">
      </div>

      <div class="col-md-3">
        <label>Festival Bonus</label>
        <input type="number" class="form-control"
               [(ngModel)]="salary.festivalBonus">
      </div>

      <div class="col-md-3">
        <label>Allowance</label>
        <input type="number" class="form-control"
               [(ngModel)]="salary.allowance">
      </div>

      <div class="col-md-3">
        <label>Medical Allowance</label>
        <input type="number" class="form-control"
               [(ngModel)]="salary.medicalAllowance">
      </div>

      <div class="col-md-3">
        <label>Housing Allowance</label>
        <input type="number" class="form-control"
               [(ngModel)]="salary.housingAllowance">
      </div>

      <div class="col-md-3">
        <label>Transport Allowance</label>
        <input type="number" class="form-control"
               [(ngModel)]="salary.transportationAllowance">
      </div>

      <div class="col-md-3">
        <label>Saving Fund</label>
        <input type="number" class="form-control"
               [(ngModel)]="salary.savingFund">
      </div>

      <div class="col-md-3">
        <label>Taxes</label>
        <input type="number" class="form-control"
               [(ngModel)]="salary.taxes">
      </div>

      <div class="col-md-3">
        <label>Net Salary</label>
        <input class="form-control fw-bold"
               [value]="calculatedNetSalary"
               readonly>
      </div>

      <div class="col-md-12">
        <button class="btn btn-primary" (click)="saveSalary()">Save</button>
        <button class="btn btn-secondary ms-2" (click)="resetForm()">Reset</button>
      </div>
    </div>
  </div>

  <!-- SALARY LIST -->
  <div class="card radius-12">
    <div class="card-header d-flex justify-content-between">
      <h6>Salary Records</h6>
      <input class="form-control w-25"
             placeholder="Search..."
             [(ngModel)]="searchQuery">
    </div>

    <div class="card-body table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>#</th>
            <th>Staff</th>
            <th>Basic</th>
            <th>Bonus</th>
            <th>Net</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let s of paginatedSalaries; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ s.staffName }}</td>
            <td>{{ s.basicSalary }}</td>
            <td>{{ s.festivalBonus }}</td>
            <td class="fw-bold">{{ s.netSalary }}</td>
            <td>
              <button class="btn btn-danger btn-sm"
                      (click)="deleteSalary(s.staffSalaryId)">
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
