<div class="dashboard-main-body">
  <app-breadcrumb [title]="title"></app-breadcrumb>

  <div class="card h-100 p-0 radius-12">
    <div class="card-header border-bottom bg-base py-16 px-24">
      <form
        #staffForm="ngForm"
        (ngSubmit)="onSubmit(staffForm)"
        novalidate
        class="staff-form"
      >
        <!-- Basic Information -->
        <div class="form-section mb-4">
          <h5 class="section-title fw-semibold mb-2">
            <span class="number">①</span> Basic Information
          </h5>
          <hr />

          <div class="row g-3 p-12">
            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">
                Staff Name <span class="text-danger">*</span>
              </label>
              <input
                type="text"
                class="form-control radius-8"
                name="staffName"
                placeholder="Enter Name"
                [(ngModel)]="newStaff.staffName"
                #staffName="ngModel"
                required
                [ngClass]="{ 'is-invalid': staffName.invalid && staffName.touched }"
              />
              <small *ngIf="staffName.invalid && staffName.touched" class="text-danger">
                This field is required
              </small>
            </div>

            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">
                Mobile No <span class="text-danger">*</span>
              </label>
              <input
                type="text"
                class="form-control radius-8"
                name="contactNumber1"
                placeholder="0300-1234567"
                [(ngModel)]="newStaff.contactNumber1"
                pattern="^03\d{2}-\d{7}$"
                #contactNumber1="ngModel"
                required
                [ngClass]="{ 'is-invalid': contactNumber1.invalid && contactNumber1.touched }"
              />
              <small *ngIf="contactNumber1.errors?.['required'] && contactNumber1.touched" class="text-danger">
                This field is required
              </small>
              <small *ngIf="contactNumber1.errors?.['pattern'] && contactNumber1.touched" class="text-danger">
                Invalid format
              </small>
            </div>

            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">Add Picture</label>
              <input
                type="file"
                class="form-control radius-8"
                id="imageUpload"
                accept=".png, .jpg, .jpeg"
                (change)="onImageSelected($event)"
              />
            </div>

            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">
                Joining Date <span class="text-danger">*</span>
              </label>
              <input
                type="date"
                class="form-control radius-8"
                name="joiningDate"
                [(ngModel)]="newStaff.joiningDate"
                #joiningDate="ngModel"
                required
                [ngClass]="{ 'is-invalid': joiningDate.invalid && joiningDate.touched }"
              />
              <small *ngIf="joiningDate.invalid && joiningDate.touched" class="text-danger">
                This field is required
              </small>
            </div>

            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">CNIC</label>
              <input
                type="text"
                class="form-control radius-8"
                name="cnic"
                placeholder="33301-1234567-1"
                [(ngModel)]="newStaff.cnic"
                pattern="^\d{5}-\d{7}-\d{1}$"
                #cnic="ngModel"
                [ngClass]="{ 'is-invalid': cnic.invalid && cnic.touched }"
              />
              <small *ngIf="cnic.invalid && cnic.touched" class="text-danger">
                Invalid format
              </small>
            </div>

            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">
                Role <span class="text-danger">*</span>
              </label>
              <select
                class="form-control radius-8 form-select"
                name="designation"
                [(ngModel)]="newStaff.designation"
                #designation="ngModel"
                required
                [ngClass]="{ 'is-invalid': designation.invalid && designation.touched }"
              >
                <option value="">Select Role</option>
                <option value="Teacher">Teacher</option>
                <option value="Professor">Professor</option>
                <option value="Principal">Principal</option>
                <option value="Counselor">Counselor</option>
                <option value="Admin">Admin</option>
                <option value="Accountant">Accountant</option>
              </select>
              <small *ngIf="designation.invalid && designation.touched" class="text-danger">
                This field is required
              </small>
            </div>
          </div>
        </div>

        <!-- Other Information -->
        <div class="form-section">
          <h5 class="section-title fw-semibold mb-2">
            <span class="number">②</span> Other Information
          </h5>
          <hr />

          <div class="row g-3 p-12">
            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">Experience</label>
              <select
                class="form-control radius-8 form-select"
                [(ngModel)]="newStaff.experience"
                name="experience"
              >
                <option value="">Select Experience</option>
                <option value="Fresh">Fresh</option>
                <option value="1+">1+ Year</option>
                <option value="2+">2+ Year</option>
                <option value="3+">3+ Year</option>
                <option value="4+">4+ Year</option>
                <option value="5+">5+ Year</option>
                <option value="10+">10+ Year</option>
                <option value="Other">Other</option>
              </select>

              <input
                *ngIf="newStaff.experience === 'Other'"
                type="text"
                class="form-control mt-2 radius-8"
                placeholder="Enter experience in years/months"
                [(ngModel)]="newStaff.customExperience"
                name="customExperience"
              />
            </div>

            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">
                Gender <span class="text-danger">*</span>
              </label>
              <select
                class="form-control radius-8 form-select"
                name="gender"
                [(ngModel)]="newStaff.gender"
                #gender="ngModel"
                required
                [ngClass]="{ 'is-invalid': gender.invalid && gender.touched }"
              >
                <option value="">Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
              </select>
              <small *ngIf="gender.invalid && gender.touched" class="text-danger">
                This field is required
              </small>
            </div>

            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">
                Date of Birth <span class="text-danger">*</span>
              </label>
              <input
                type="date"
                class="form-control radius-8"
                name="dob"
                [(ngModel)]="newStaff.dob"
                #dob="ngModel"
                required
                [ngClass]="{ 'is-invalid': dob.invalid && dob.touched }"
              />
              <small *ngIf="dob.invalid && dob.touched" class="text-danger">
                This field is required
              </small>
            </div>

            <!-- Qualification -->
            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">
                Qualification <span class="text-danger">*</span>
              </label>
              <select
                class="form-control radius-8 form-select"
                name="qualifications"
                [(ngModel)]="newStaff.qualifications"
                #qualifications="ngModel"
                required
                [ngClass]="{ 'is-invalid': qualifications.invalid && qualifications.touched }"
              >
                <option value="">Select Qualification</option>
                <option value="masters">Masters</option>
                <option value="bachelors">Bachelors</option>
                <option value="associateDegree">Associate Degree</option>
                <option value="diploma">DAE</option>
                <option value="intermediate">Intermediate</option>
                <option value="matriculation">Matriculation</option>
                <option value="middle">Middle</option>
                <option value="primary">Primary</option>
                <option value="na">N/A</option>
              </select>
              <small *ngIf="qualifications.invalid && qualifications.touched" class="text-danger">
                This field is required
              </small>
            </div>

            <!-- Program Duration & Subject handled correctly -->
            <div
              class="col-12 col-sm-6 col-md-4"
              *ngIf="newStaff.qualifications === 'associateDegree'"
            >
              <label class="form-label">
                Program Duration <span class="text-danger">*</span>
              </label>
              <select
                class="form-control radius-8 form-select"
                [(ngModel)]="newStaff.programDuration"
                name="programDuration"
                #programDuration="ngModel"
                required
                [ngClass]="{ 'is-invalid': programDuration.invalid && programDuration.touched }"
              >
                <option value="">Select Duration</option>
                <option value="2-year">2-Year Program</option>
                <option value="4-year">4-Year Program</option>
              </select>
              <small *ngIf="programDuration.invalid && programDuration.touched" class="text-danger">
                This field is required
              </small>
            </div>

            <!-- Subject -->
            <div
              class="col-12 col-sm-6 col-md-4"
              *ngIf="newStaff.qualifications === 'bachelors' || newStaff.qualifications === 'associateDegree'"
            >
              <label class="form-label">
                Subject <span class="text-danger">*</span>
              </label>
              <select
                class="form-control radius-8 form-select"
                [(ngModel)]="newStaff.subject"
                name="subject"
                #subject="ngModel"
                required
                [ngClass]="{ 'is-invalid': subject.invalid && subject.touched }"
              >
                <option value="">Select Subject</option>
                <option *ngIf="newStaff.qualifications === 'associateDegree'" value="arts">Arts</option>
                <option *ngIf="newStaff.qualifications === 'associateDegree'" value="science">Science</option>
                <option *ngIf="newStaff.qualifications === 'associateDegree'" value="commerce">Commerce</option>
                <option *ngIf="newStaff.qualifications === 'associateDegree'" value="computerScience">Computer Science</option>

                <option *ngIf="newStaff.qualifications === 'bachelors'" value="bsComputerScience">BS Computer Science</option>
                <option *ngIf="newStaff.qualifications === 'bachelors'" value="bsEnglish">BS English</option>
                <option *ngIf="newStaff.qualifications === 'bachelors'" value="bsMath">BS Mathematics</option>
                <option *ngIf="newStaff.qualifications === 'bachelors'" value="bsPhysics">BS Physics</option>
                <option *ngIf="newStaff.qualifications === 'bachelors'" value="bsChemistry">BS Chemistry</option>
                <option *ngIf="newStaff.qualifications === 'bachelors'" value="bsEconomics">BS Economics</option>
                <option *ngIf="newStaff.qualifications === 'bachelors'" value="bsEducation">BS Education</option>
                <option *ngIf="newStaff.qualifications === 'bachelors'" value="bsIslamicStudies">BS Islamic Studies</option>

                <option value="other">Other</option>
              </select>
              <small *ngIf="subject.invalid && subject.touched" class="text-danger">
                This field is required
              </small>
            </div>

            <div class="col-12 col-sm-6 col-md-4" *ngIf="newStaff.subject === 'other'">
              <label class="form-label">Other Subject <span class="text-danger">*</span></label>
              <input
                type="text"
                class="form-control radius-8"
                name="customSubject"
                placeholder="Enter subject name"
                [(ngModel)]="newStaff.customSubject"
                #customSubject="ngModel"
                required
                [ngClass]="{ 'is-invalid': customSubject.invalid && customSubject.touched }"
              />
              <small *ngIf="customSubject.invalid && customSubject.touched" class="text-danger">
                This field is required
              </small>
            </div>

            <!-- Email & Status -->
            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">Email</label>
              <input
                type="email"
                class="form-control radius-8"
                name="email"
                [(ngModel)]="newStaff.email"
              />
            </div>

            <div class="col-12 col-sm-6 col-md-4">
              <label class="form-label">Status <span class="text-danger">*</span></label>
              <select
                class="form-control radius-8 form-select"
                name="status"
                [(ngModel)]="newStaff.status"
                #status="ngModel"
                required
                [ngClass]="{ 'is-invalid': status.invalid && status.touched }"
              >
                <option value="">Select Status</option>
                <option value="Active">Active</option>
                <option value="Inactive">Inactive</option>
              </select>
              <small *ngIf="status.invalid && status.touched" class="text-danger">
                This field is required
              </small>
            </div>

            <div class="col-12">
              <label class="form-label">Address <span class="text-danger">*</span></label>
              <textarea
                class="form-control radius-8"
                rows="3"
                name="permanentAddress"
                placeholder="Village 97 JB, Gojra, Toba Tek Singh"
                [(ngModel)]="newStaff.permanentAddress"
                #permanentAddress="ngModel"
                required
                [ngClass]="{ 'is-invalid': permanentAddress.invalid && permanentAddress.touched }"
              ></textarea>
              <small *ngIf="permanentAddress.invalid && permanentAddress.touched" class="text-danger">
                This field is required
              </small>
            </div>
          </div>
        </div>

        <!-- Buttons -->
        <div class="d-flex align-items-center justify-content-center gap-3 mt-4">
          <button
            type="button"
            (click)="cancel()"
            class="border border-danger-600 bg-hover-danger-200 text-danger-600 text-md px-56 py-11 radius-8"
          >
            Cancel
          </button>

          <button
            type="submit"
            class="btn btn-primary border border-primary-600 text-md px-56 py-12 radius-8"
          >
            Save
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
